<!doctype html><html lang=en-gb dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Proxmox Virtual Environment (PVE) offers powerful virtualization capabilities but tinkering with PCIe devices can lead to unexpected challenges. If like me, you didn&amp;rsquo;t realize that messing around with PCIe devices in your Proxmox PVE host would break your VMs, keep reading.
In my case, I added a new NVMe SSD, but this can also happen when removing PCIe devices.
Access the Proxmox PVE host with mouse and keyboard and log in as a privileged user.
"><title>Fixing Proxmox PVE issues when adding or removing PCIe devices</title><link rel=canonical href=https://nullcheck.me/p/fixing-changes-in-proxmox-pcie-ids/><link rel=stylesheet href=/scss/style.min.44e6f89da8c5c3c6103653b88abf2e8c03a0b7901dbc9051df92e8b7052115d9.css><meta property="og:title" content="Fixing Proxmox PVE issues when adding or removing PCIe devices"><meta property="og:description" content="Proxmox Virtual Environment (PVE) offers powerful virtualization capabilities but tinkering with PCIe devices can lead to unexpected challenges. If like me, you didn&amp;rsquo;t realize that messing around with PCIe devices in your Proxmox PVE host would break your VMs, keep reading.
In my case, I added a new NVMe SSD, but this can also happen when removing PCIe devices.
Access the Proxmox PVE host with mouse and keyboard and log in as a privileged user.
"><meta property="og:url" content="https://nullcheck.me/p/fixing-changes-in-proxmox-pcie-ids/"><meta property="og:site_name" content="nullcheck.me"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="PCI Passthrough"><meta property="article:tag" content="Proxmox PVE"><meta property="article:published_time" content="2023-08-03T22:10:52+00:00"><meta property="article:modified_time" content="2023-08-04T08:36:20+02:00"><meta property="og:image" content="https://nullcheck.me/p/fixing-changes-in-proxmox-pcie-ids/pexels-pok-rie-1432794.jpg"><meta name=twitter:title content="Fixing Proxmox PVE issues when adding or removing PCIe devices"><meta name=twitter:description content="Proxmox Virtual Environment (PVE) offers powerful virtualization capabilities but tinkering with PCIe devices can lead to unexpected challenges. If like me, you didn&amp;rsquo;t realize that messing around with PCIe devices in your Proxmox PVE host would break your VMs, keep reading.
In my case, I added a new NVMe SSD, but this can also happen when removing PCIe devices.
Access the Proxmox PVE host with mouse and keyboard and log in as a privileged user.
"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nullcheck.me/p/fixing-changes-in-proxmox-pcie-ids/pexels-pok-rie-1432794.jpg"><link rel="shortcut icon" href=/favicon.png><style>:root{--code-font-family:"Source Code Pro", Menlo, Monaco, Consolas, "Courier New", monospace}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.setItem(e,"dark")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu190e528798e90195d3cefef01f0a2d44_410_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>☁️</span></figure><div class=site-meta><h1 class=site-name><a href=/><span class=mark>></span><div class=stack style=--stacks:3><span class=title style=--index:0>nullcheck.me</span>
<span class=title style=--index:1>nullcheck.me</span>
<span class=title style=--index:2>nullcheck.me</span></div><span class=cursor></span></a></h1><h2 class=site-description>have you tried turning it off and on again?</h2></div></header><ol class=social-menu><li><a href=https://github.com/dsiguero/ target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#gathering-info-pcie-bus-ids>Gathering info: PCIe bus ids</a></li><li><a href=#potential-issues>Potential issues</a><ol><li><a href=#issue-1-network-connectivity-is-gone>Issue 1: Network connectivity is gone</a></li><li><a href=#issue-2-broken-passthrough-pci-devices>Issue 2: Broken Passthrough PCI devices</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/fixing-changes-in-proxmox-pcie-ids/><img src=/p/fixing-changes-in-proxmox-pcie-ids/pexels-pok-rie-1432794_hu3d03a01dcc18bc5be0e67db3d8d209a6_357243_800x0_resize_q75_box.jpg srcset="/p/fixing-changes-in-proxmox-pcie-ids/pexels-pok-rie-1432794_hu3d03a01dcc18bc5be0e67db3d8d209a6_357243_800x0_resize_q75_box.jpg 800w, /p/fixing-changes-in-proxmox-pcie-ids/pexels-pok-rie-1432794_hu3d03a01dcc18bc5be0e67db3d8d209a6_357243_1600x0_resize_q75_box.jpg 1600w" width=800 height=533 loading=lazy alt="Featured image of post Fixing Proxmox PVE issues when adding or removing PCIe devices"></a></div><div class=article-details><header class=article-category><a href=/categories/homelab/ style=background-color:#cb4b16;color:#fff>homelab</a>
<a href=/categories/virtualization/>virtualization</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/fixing-changes-in-proxmox-pcie-ids/>Fixing Proxmox PVE issues when adding or removing PCIe devices</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>03 Aug 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><p>Proxmox Virtual Environment (PVE) offers powerful virtualization capabilities but tinkering with PCIe devices can lead to unexpected challenges. If like me, you didn&rsquo;t realize that messing around with PCIe devices in your Proxmox PVE host would break your VMs, keep reading.</p><p>In my case, I added a new NVMe SSD, but this can also happen when removing PCIe devices.</p><p>Access the Proxmox PVE host with mouse and keyboard and log in as a privileged user.</p><h2 id=gathering-info-pcie-bus-ids>Gathering info: PCIe bus ids</h2><p>It&rsquo;s <strong>EXTREMELY</strong> likely that the device addresses change upon adding or removing any PCIe devices:</p><blockquote><p><p>[For each restart] the PCI BIOS must walk the base PCI bus (starting at bus 0), subsequent bridges, and bridged devices to search and identify other PCI buses as if it were the first time.</p><p>Each time the PCI BIOS discovers another PCI bus after a physical configuration change is made, it increments the bus number and continues to walk the bus until all other buses are discovered.</p><p>As it discovers each bus and/or bridge, the PCI BIOS:</p><ul><li>Records each unique bus number</li><li>Associates the bus number to a bus or bridged PCI device</li></ul></p><span class=cite><span>― </span><span>Compaq, </span><a href=https://tinyurl.com/59f2cwyh><cite>PCI Bus Numbering in a Microsoft Windows NT Environment</cite></a></span></blockquote><p>In order to better understand how the PCIe bus ids have changed, lets run <code>lspci</code> to get a list of PCIe devices installed and their respective bus ids.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ lspci
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>...<span class=o>]</span>
</span></span><span class=line><span class=cl>01:00.0 Non-Volatile memory controller: MAXIO Technology <span class=o>(</span>Hangzhou<span class=o>)</span> Ltd. NVMe SSD Controller MAP1202 <span class=o>(</span>rev 01<span class=o>)</span>
</span></span><span class=line><span class=cl>02:00.0 Ethernet controller: Intel Corporation Device 125c <span class=o>(</span>rev 04<span class=o>)</span>
</span></span><span class=line><span class=cl>03:00.0 Ethernet controller: Intel Corporation Device 125c <span class=o>(</span>rev 04<span class=o>)</span>
</span></span><span class=line><span class=cl>04:00.0 Ethernet controller: Intel Corporation Device 125c <span class=o>(</span>rev 04<span class=o>)</span>
</span></span><span class=line><span class=cl>05:00.0 Ethernet controller: Intel Corporation Device 125c <span class=o>(</span>rev 04<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><p>The NVMe drive I just installed is <code>01:00.0</code>. That bus id used to belong to the first Intel ethernet controller. So in this case, all NICs bus ids have increased by one.</p><ul><li><code>01:00.0</code> is now <code>02:00.0</code></li><li><code>02:00.0</code> is now <code>03:00.0</code></li><li>&mldr;and so on</li></ul><h2 id=potential-issues>Potential issues</h2><h3 id=issue-1-network-connectivity-is-gone>Issue 1: Network connectivity is gone</h3><p>If your NICs are PCIe (which is very likely!), they would be affected by this:</p><blockquote><p><p>The Linux kernel assigns names to network interfaces by combining a fixed prefix and a number that increases as the kernel initializes the network devices. [&mldr;] If you add another network interface card to the system, the assignment of the kernel device names is no longer fixed. Consequently, after a reboot, the kernel can name the device differently.</p><p>When the consistent network device name feature is enabled, the <code>udev</code> device manager creates the names of devices based on different criteria.</p><ul><li><p><code>en</code> for Ethernet</p></li><li><p><code>[P&lt;domain_number>]p&lt;bus>s&lt;slot>[f&lt;function>][d&lt;device_id>]</code></p></li></ul></p><span class=cite><span>― </span><span>RedHat, </span><a href=https://tinyurl.com/2cphu56z><cite>RHEL 8 documentation. Chapter 1. Consistent network interface device naming</cite></a></span></blockquote><p>Run <code>ip link</code> (with the ethernet cable connected) in order to get the interface name for the Proxmox Linux Bridge.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ip link
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class=m>65536</span> qdisc noqueue state UNKNOWN mode DEFAULT group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span class=line><span class=cl>5: enp5s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1500</span> qdisc mq master vmbr0 state UP mode DEFAULT group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/ether xx:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff
</span></span><span class=line><span class=cl>7: vmbr0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class=m>1500</span> qdisc noqueue state UP mode DEFAULT group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>    link/ether xx:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff
</span></span></code></pre></td></tr></table></div></div><p>Leaving the loopback (<code>lo</code>) and Linux Bridge (<code>vmbr0</code>) interfaces aside, the new interface name for the Linux Bridge is <code>enp5s0</code>.</p><p>Comparing against the naming criteria, we can understand that <code>enp5s0</code>:</p><ul><li>Is an ethernet connection.</li><li>Its bus is <code>5</code>.</li><li>Its slot within the bus is <code>0</code>.</li></ul><p>Can now edit <code>/etc/network/interfaces</code> to reflect the change, and restart the <code>networking</code> service.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl># /etc/network/interfaces
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>auto lo
</span></span><span class=line><span class=cl>iface lo inet loopback
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>auto vmbr0
</span></span><span class=line><span class=cl>iface vmbr0 inet static
</span></span><span class=line><span class=cl>        address 192.168.1.120/24
</span></span><span class=line><span class=cl>        gateway 192.168.1.1
</span></span><span class=line><span class=cl><span class=gd>-       bridge-ports enp4s0
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+       bridge-ports enp5s0
</span></span></span><span class=line><span class=cl><span class=gi></span>        bridge-stp off
</span></span><span class=line><span class=cl>        bridge-fd 0
</span></span><span class=line><span class=cl>        bridge-vlan-aware yes
</span></span><span class=line><span class=cl>        bridge-vids 2-4094
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ systemctl restart networking.service
</span></span></code></pre></td></tr></table></div></div><p>At this point, network connectivity should be restored. Check by pinging Google: <code>ping -c3 google.com</code>.</p><h3 id=issue-2-broken-passthrough-pci-devices>Issue 2: Broken Passthrough PCI devices</h3><p>Now, one of Proxmox PVE features is the ability to do PCI Passthrough, allowing the guest VM to access host physical resources. As you have probably guessed by now, if any of your VMs use PCI passthrough, they will also be affected by the PCIe bus changes.</p><div class=notice--info><p>This is required for every VM that does PCI passthrough.</p></div><p>Retrieve the VM id of the relevant machine, with the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ qm list
</span></span><span class=line><span class=cl>VMID    NAME        STATUS     MEM<span class=o>(</span>MB<span class=o>)</span>    BOOTDISK<span class=o>(</span>GB<span class=o>)</span>      PID       
</span></span><span class=line><span class=cl><span class=m>100</span>     routervm     running    <span class=m>8192</span>       32.00             <span class=m>8705</span>  
</span></span></code></pre></td></tr></table></div></div><p>Then export the VM id as an environment variable, to avoid having to remember it every time: <code>export VM_ID=100</code>.</p><p>Ensure the VM is (gracefully) stopped, by running <code>qm shutdown $VM_ID</code>. Once stopped, check the VM config, with <code>qm config $VM_ID</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ qm config <span class=nv>$VM_ID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>boot: <span class=nv>order</span><span class=o>=</span>scsi0
</span></span><span class=line><span class=cl>cores: <span class=m>4</span>
</span></span><span class=line><span class=cl>cpu: kvm64,flags<span class=o>=</span>+aes
</span></span><span class=line><span class=cl>hostpci0: 0000:02:00
</span></span><span class=line><span class=cl>hostpci1: 0000:03:00
</span></span><span class=line><span class=cl>hostpci2: 0000:04:00
</span></span><span class=line><span class=cl><span class=o>[</span>...<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p><code>hostpci0</code>, <code>hostpci1</code> and <code>hostpci2</code> are all NICs that are PCI passthrough devices. As mentioned earlier, the bus ids for the NICs has increased by one, so just need to edit the VM config file located in <code>/etc/pve/qemu-server/${VM_ID}.conf</code> in my case:</p><div class=notice--warn><p>Remember to shutdown the machine first if you haven&rsquo;t yet: <code>qm shutdown $VM_ID</code></p></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl># /etc/pve/qemu-server/$VM_ID.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[...]
</span></span><span class=line><span class=cl>cores: 4
</span></span><span class=line><span class=cl>cpu: kvm64,flags=+aes
</span></span><span class=line><span class=cl><span class=gd>- hostpci0: 0000:02:00
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+ hostpci0: 0000:03:00
</span></span></span><span class=line><span class=cl><span class=gi></span><span class=gd>- hostpci1: 0000:03:00
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+ hostpci1: 0000:04:00
</span></span></span><span class=line><span class=cl><span class=gi></span><span class=gd>- hostpci2: 0000:04:00
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+ hostpci2: 0000:05:00
</span></span></span><span class=line><span class=cl><span class=gi></span>memory: 8192
</span></span><span class=line><span class=cl>[...]
</span></span></code></pre></td></tr></table></div></div><p>Now you should just be able to either start the VM from the Proxmox Web UI (remember, we just restored connectivity to it!). Or by running the following command: <code>qm start $VM_ID</code>.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/pci-passthrough/>PCI Passthrough</a>
<a href=/tags/proxmox-pve/>Proxmox PVE</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>Last updated on 04 Aug 2023 at 08:36 CEST</span></section></footer></article><footer class=site-footer><section class=copyright>&copy;
2023 nullcheck.me</section><section class=powerby>Built by <a href=https://github.com/dsiguero/ target=_blank>dsiguero</a><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.17.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>